(this["webpackJsonpmern-beginner-frontend"]=this["webpackJsonpmern-beginner-frontend"]||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(2),s=n.n(a),i=n(26),r=n.n(i),o=(n(72),n(15)),j=(n(73),n(103)),l=(n(74),n(31)),d=l.a.initializeApp({apiKey:"AIzaSyCpLuNDlfLmj7MXLzdhquCnmqM9yUTbTU8",authDomain:"react-beginner-chat.firebaseapp.com",databaseURL:"https://react-beginner-chat.firebaseio.com",projectId:"react-beginner-chat",storageBucket:"react-beginner-chat.appspot.com",messagingSenderId:"324749925709",appId:"1:324749925709:web:7a65ce74dcc4af60bb2b04",measurementId:"G-Y2M0MMPCB2"}),b=d.firestore(),h=d.auth(),u=new l.a.auth.GoogleAuthProvider,O=b,m=Object(a.createContext)(),x=function(e){var t=e.reducer,n=e.initialState,s=e.children;return Object(c.jsx)(m.Provider,{value:Object(a.useReducer)(t,n),children:s})},p=function(){return Object(a.useContext)(m)},v=n(39),f="SET_USER",g=function(e,t){switch(console.log(t),t.type){case f:return Object(v.a)(Object(v.a)({},e),{},{user:t.user});default:return e}};var N=function(){var e=p(),t=Object(o.a)(e,2),n=(t[0],t[1]);return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login_container",children:[Object(c.jsx)("img",{src:"android-chrome-512x512.png",alt:"logo"}),Object(c.jsx)("h1",{children:"Sign in to react-beginner-chat app"}),Object(c.jsx)("p",{children:"notepraiya"}),Object(c.jsx)(j.a,{onClick:function(e){h.signInWithPopup(u).then((function(e){console.log(e),n({type:f,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with Google"})]})})},I=(n(82),n(104)),S=n(48),_=n.n(S),C=n(49),y=n.n(C),w=n(50),L=n.n(w);var M=function(){var e=p(),t=Object(o.a)(e,1)[0].user;return Object(c.jsxs)("div",{className:"header",children:[Object(c.jsxs)("div",{className:"header_left",children:[Object(c.jsx)(I.a,{className:"header_avatar",alt:null===t||void 0===t?void 0:t.displayName,src:null===t||void 0===t?void 0:t.photoURL}),Object(c.jsx)(_.a,{})]}),Object(c.jsxs)("div",{className:"header_search",children:[Object(c.jsx)(y.a,{}),Object(c.jsx)("input",{placeholder:"Search"})]}),Object(c.jsx)("div",{className:"header_right",children:Object(c.jsx)(L.a,{})})]})},T=(n(84),n(51)),D=n.n(T),P=n(52),U=n.n(P),k=n(9);n(85);var F=function(e){var t=e.Icon,n=e.title,a=e.id,s=e.addChannelOption,i=Object(k.f)();return Object(c.jsxs)("div",{className:"sidebarOption",onClick:s?function(){var e=prompt("please enter the channel name");e&&O.collection("rooms").add({name:e})}:function(){a?i.push("/room/".concat(a)):i.push(n)},children:[t&&Object(c.jsx)(t,{className:"sidebarOption_icon"}),t?Object(c.jsx)("h3",{children:n}):Object(c.jsxs)("h3",{className:"sidebarOption_channel",children:[Object(c.jsx)("span",{className:"sidebarOption_hash",children:"#"}),n]})]})},R=n(53),A=n.n(R),B=n(54),E=n.n(B),z=n(55),G=n.n(z),q=n(56),J=n.n(q),W=n(57),K=n.n(W),V=n(58),X=n.n(V),Y=n(59),H=n.n(Y),Q=n(60),Z=n.n(Q),$=n(61),ee=n.n($),te=n(62),ne=n.n(te);var ce=function(){var e=p(),t=Object(o.a)(e,1)[0].user,n=Object(a.useState)([]),s=Object(o.a)(n,2),i=s[0],r=s[1];return Object(a.useEffect)((function(){O.collection("rooms").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,name:e.data().name}})))}))}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar_header",children:[Object(c.jsxs)("div",{className:"sidebar_info",children:[Object(c.jsx)("h2",{children:"Club Note"}),Object(c.jsxs)("h3",{children:[Object(c.jsx)(D.a,{}),null===t||void 0===t?void 0:t.displayName]})]}),Object(c.jsx)(U.a,{})]}),Object(c.jsx)(F,{Icon:A.a,title:"Threads"}),Object(c.jsx)(F,{Icon:E.a,title:"Mentions & reactions"}),Object(c.jsx)(F,{Icon:G.a,title:"Saved Items"}),Object(c.jsx)(F,{Icon:J.a,title:"Channel browser"}),Object(c.jsx)(F,{Icon:K.a,title:"People & user groups"}),Object(c.jsx)(F,{Icon:X.a,title:"Apps"}),Object(c.jsx)(F,{Icon:H.a,title:"File browser"}),Object(c.jsx)(F,{Icon:Z.a,title:"Show less"}),Object(c.jsx)("hr",{}),Object(c.jsx)(F,{Icon:ee.a,title:"Channels"}),Object(c.jsx)("hr",{}),Object(c.jsx)(F,{Icon:ne.a,title:"Add channel",addChannelOption:!0}),i.map((function(e){var t=e.id,n=e.name;return Object(c.jsx)(F,{title:n,id:t},t)}))]})},ae=(n(87),n(63)),se=n.n(ae),ie=n(64),re=n.n(ie);n(88);var oe=function(e){var t=e.message,n=e.timestamp,a=e.user,s=e.userImage;return Object(c.jsxs)("div",{className:"message",children:[Object(c.jsx)("img",{src:s,alt:""}),Object(c.jsxs)("div",{className:"message_info",children:[Object(c.jsxs)("h4",{children:[a," ",Object(c.jsx)("span",{className:"message_timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]}),Object(c.jsx)("p",{children:t})]})]})};n(89);var je=function(e){var t=e.channelName,n=e.channelId,s=p(),i=Object(o.a)(s,1)[0].user,r=Object(a.useState)(""),d=Object(o.a)(r,2),b=d[0],h=d[1];return Object(c.jsx)("div",{className:"chatinput",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{placeholder:"Message #".concat(t),value:b,onChange:function(e){return h(e.target.value)}}),Object(c.jsx)(j.a,{type:"submit",onClick:function(e){e.preventDefault(),n&&(O.collection("rooms").doc(n).collection("messages").add({message:b,timestamp:l.a.firestore.FieldValue.serverTimestamp(),user:i.displayName,userImage:i.photoURL}),h(""))},children:"Send"})]})})};var le=function(){var e=Object(k.g)().roomId,t=Object(a.useState)(null),n=Object(o.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)([]),j=Object(o.a)(r,2),l=j[0],d=j[1];return Object(a.useEffect)((function(){e&&O.collection("rooms").doc(e).onSnapshot((function(e){i(e.data())})),O.collection("rooms").doc(e).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){d(e.docs.map((function(e){return e.data()})))}))}),[e]),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat_header",children:[Object(c.jsx)("div",{className:"chat_headerLeft",children:Object(c.jsxs)("h4",{className:"chat_channelName",children:[Object(c.jsxs)("strong",{children:["# ",null===s||void 0===s?void 0:s.name]}),Object(c.jsx)(se.a,{})]})}),Object(c.jsx)("div",{className:"chat_headerRight",children:Object(c.jsxs)("p",{children:[Object(c.jsx)(re.a,{})," Details"]})})]}),Object(c.jsx)("div",{className:"chat_messages",children:l.map((function(e,t){var n=e.message,a=e.timestamp,s=e.user,i=e.userImage;return Object(c.jsx)(oe,{message:n,timestamp:a,user:s,userImage:i},t)}))}),Object(c.jsx)(je,{channelName:null===s||void 0===s?void 0:s.name,channelId:e})]})},de=n(33);var be=function(){var e=p(),t=Object(o.a)(e,2),n=t[0].user;return t[1],Object(c.jsx)("div",{className:"app",children:n?Object(c.jsxs)(de.a,{basename:"/react-beginner-chat",children:[Object(c.jsx)(M,{}),Object(c.jsxs)("div",{className:"app_body",children:[Object(c.jsx)(ce,{}),Object(c.jsxs)(k.c,{children:[Object(c.jsx)(k.a,{path:"/room/:roomId",children:Object(c.jsx)(le,{})}),Object(c.jsx)(k.a,{path:"/",children:Object(c.jsx)("h1",{children:"Welcome"})})]})]})]}):Object(c.jsx)(N,{})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,105)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(x,{initialState:{user:null},reducer:g,children:Object(c.jsx)(be,{})})}),document.getElementById("root")),he()}},[[90,1,2]]]);
//# sourceMappingURL=main.98830b32.chunk.js.map